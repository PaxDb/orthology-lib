#!/usr/bin/env node

const neo4jUser = process.env.NEO4J_USER || 'neo4j';
const neo4jPass = process.env.NEO4J_PASS || 'neo4j';
const neo4jHost = process.env.NEO4J_HOST || 'neo4j';
const neo4jPort = process.env.NEO4J_PORT || '7474';
const serverUrl = `http://${neo4jHost}:${neo4jPort}`;

const connectionOpts = { server: serverUrl, user: neo4jUser, pass: neo4jPass };
const indexer = require('../lib/importer')(connectionOpts);
//neo4j requires that the initial password neo4j is changed
indexer.changeInitialPassword(err => {
    if (err) {
        throw Error("failed to change initial password, cannot index");
    }
    indexer.import_data();
});
