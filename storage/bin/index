#!/usr/bin/env node

const consul_host = process.env.CONSUL_HOST || '127.0.0.1'
const neo4j_pass = process.env.NEO4J_PASS || 'neo4j'

// get neo4j connection params

const consul = require('../lib/consul-client')({consul_host: consul_host})
consul.serviceDescription('orthology_storage_v4.0', function (description) {
    const server_url = 'http://' + description[0].ServiceAddress + ':' + description[0].ServicePort
    const indexer = require('../lib/importer')({server: server_url, user: 'neo4j', pass: neo4j_pass});
    indexer.import_data()
});
